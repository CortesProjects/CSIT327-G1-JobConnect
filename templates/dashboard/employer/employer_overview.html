{% extends 'dashboard/employer/employer_dashboard_base.html' %}
{% load static %}

{% block dashboard_content %}
<div class="employer-overview">
    <div class="employer-header">
        <h2>Hello, {{ user.employer_profile_rel.company_name|default:user.username }}</h2>
        <p>Here is your daily activities and applications</p>
    </div>

    <div class="stats-cards-container">
        <div class="stat-card blue">
            <div class="stat-info">
                <span class="stat-number">{{ open_jobs_count|default:0 }}</span>
                <span class="stat-label">Open Jobs</span>
            </div>
            <div class="stat-icon-bg blue">
                <i class="fas fa-briefcase"></i>
            </div>
        </div>
        <div class="stat-card yellow">
            <div class="stat-info">
                <span class="stat-number">{{ saved_candidates_count|default:0 }}</span>
                <span class="stat-label">Saved Candidates</span>
            </div>
            <div class="stat-icon-bg yellow">
                <i class="fas fa-bookmark"></i>
            </div>
        </div>
    </div>

    <div class="recently-posted-jobs {% if not has_jobs %}empty{% endif %}">
        <div class="section-header">
            <h3>Recently Posted Jobs</h3>
            {% if has_jobs %}
                <a href="{% url 'dashboard:employer_my_jobs' %}" class="view-all-link">
                    View all <i class="fas fa-arrow-right"></i>
                </a>
            {% endif %}
        </div>

        <div class="jobs-table-wrapper">
            <table class="jobs-table">
                <thead>
                    <tr>
                        <th>JOBS</th>
                        <th>STATUS</th>
                        <th>APPLICATIONS</th>
                        <th>ACTIONS</th>
                    </tr>
                </thead>
                <tbody>
                    {% if has_jobs %}
                        {% for job in recent_jobs %}
                            {% include 'dashboard/employer/components/job_row.html' with job=job %}
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td colspan="4">
                                <div class="empty-jobs-placeholder">
                                    <div class="empty-jobs-content">
                                        <h4>You haven't posted a job yet</h4>
                                        <p class="muted">Create your first job posting to start receiving applications.</p>
                                        <a href="{% url 'dashboard:employer_post_job' %}" class="btn-post-job">
                                            <i class="fas fa-plus"></i> Post a Job
                                        </a>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
    </div>
</div>

{% block extra_js %}
<script src="{% static 'js/dashboard/employer/job_table.js' %}"></script>
{% endblock %}
{% endblock %}
